<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>System Notes</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-05-03T12:01:47.060Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Wu Dong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>systemtap分析软raid io拆分问题</title>
    <link href="http://yoursite.com/2016/05/03/systemtap-analysis-mdraid-io/"/>
    <id>http://yoursite.com/2016/05/03/systemtap-analysis-mdraid-io/</id>
    <published>2016-05-03T11:02:02.000Z</published>
    <updated>2016-05-03T12:01:47.060Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x4F7F;&amp;#x7528;linux &amp;#x8F6F;raid1&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x9047;&amp;#x5230;&amp;#x4E2A;&amp;#x5947;&amp;#x602A;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5F53;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x6BD4;&amp;#x5982;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x4E3A;4k&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF1B;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x5982;sdb&amp;#xFF0C;sdc&amp;#xFF0C;vdb&amp;#xFF0C;vdc&amp;#x8FD9;&amp;#x79CD;&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6709;io&amp;#x62C6;&amp;#x5206;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#x4EE5;&amp;#x4F8B;&amp;#x5B50;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD9;&amp;#x4E2A;&amp;#x73B0;&amp;#x8C61;&amp;#xFF08;&amp;#x4EE5;raid1&amp;#xFF0C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF09;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mdadm &amp;#x2013;create /dev/md/md_test1 &amp;#x2013;run &amp;#x2013;force &amp;#x2013;metadata=0.9 &amp;#x2013;assume-clean &amp;#x2013;level=1 &amp;#x2013;raid-devices=2 /dev/vdb /dev/vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 vdc[1] vdb[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8BE5;raid1&amp;#x8FDB;&amp;#x884C;&amp;#x968F;&amp;#x673A;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF08;&amp;#x987A;&amp;#x5E8F;&amp;#x5199;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF09;&amp;#xFF0C;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;64KB&amp;#xFF0C;fio&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x5982;&amp;#x4E0B;:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[global]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rw=randwrite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;direct=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;numjobs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioengine=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bsrange=64k-64k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rate_iops=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;time_based&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime=120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_reporting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[disk00]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename=/dev/md127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x5199;io&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con1-iostat.png&quot; alt=&quot;con1-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;avgrq-sz&amp;#x4E3A;128&amp;#xFF0C;&amp;#x5355;&amp;#x4F4D;&amp;#x662F;&amp;#x6247;&amp;#x533A;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;64KB&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&lt;/h1&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x5148;&amp;#x7528;vdb&amp;#x548C;vdc&amp;#x5206;&amp;#x522B;&amp;#x521B;&amp;#x5EFA;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x7528;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;dm&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;raid1&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 41943040 linear /dev/vdb 0&amp;quot; | dmsetup create testdisk1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 41943040 linear /dev/vdc 0&amp;quot; | dmsetup create testdisk2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#mdadm --create /dev/md/md_test1 --run --force --metadata=0.9 --assume-clean --level=1 --raid-devices=2  /dev/mapper/testdisk1 /dev/mapper/testdisk2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 dm-1[1] dm-0[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x4E0D;&amp;#x53D8;&amp;#xFF0C;&amp;#x5BF9;md127&amp;#x8FDB;&amp;#x884C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 dm-0 dm-1 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con2-iostat.png&quot; alt=&quot;con2-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;md127&amp;#x548C;dm-0&amp;#xFF0C;dm-1&amp;#x4E0A;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x90FD;&amp;#x662F;4KB&amp;#xFF0C;&amp;#x5B9E;&amp;#x9645;&amp;#x4E0A;&amp;#x5BF9;md127&amp;#x53D1;&amp;#x7684;&amp;#x662F;64KB&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;vdb&amp;#x548C;vdc&amp;#x4E0A;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;64KB&amp;#x4E0E;fio&amp;#x53D1;&amp;#x7684;io&amp;#x5927;&amp;#x5C0F;&amp;#x4E00;&amp;#x81F4;&amp;#xFF0C;io&amp;#x53C8;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x540E;&amp;#x9762;&amp;#x4F1A;&amp;#x89E3;&amp;#x91CA;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x4F1A;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot;&gt;&lt;/a&gt;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&lt;/h1&gt;&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;raid&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;io&amp;#x4F1A;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x80FD;&amp;#x591F;&amp;#x770B;&amp;#x5230;&amp;#x5757;io&amp;#x6BCF;&amp;#x4E00;&amp;#x5C42;&amp;#x6B21;&amp;#x8C03;&amp;#x7528;&amp;#x65F6;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x77E5;&amp;#x9053;&amp;#x5728;&amp;#x54EA;&amp;#x4E00;&amp;#x5C42;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x796D;&amp;#x51FA;&amp;#x795E;&amp;#x5668;systemtap&amp;#x3002;&amp;#x4E0D;&amp;#x8FC7;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x8FD8;&amp;#x5F97;&amp;#x5BF9;&amp;#x5185;&amp;#x6838;&amp;#x6709;&amp;#x4E00;&amp;#x5B9A;&amp;#x7684;&amp;#x4E86;&amp;#x89E3;&amp;#xFF0C;&amp;#x4E00;&amp;#x65F6;&amp;#x534A;&amp;#x4F1A;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;linux&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x67D0;&amp;#x4E00;&amp;#x5757;&amp;#x5F88;&amp;#x8270;&amp;#x96BE;&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x5C31;&amp;#x53EA;&amp;#x80FD;&amp;#x5BF9;&amp;#x7167;&amp;#x7740;&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x67E5;&amp;#x627E;&amp;#x5173;&amp;#x952E;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x8C03;&amp;#x7528;&amp;#x5904;&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x5206;&amp;#x6790;&amp;#x3002;&amp;#x6700;&amp;#x597D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0E;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7248;&amp;#x672C;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x66F4;&amp;#x597D;&amp;#x5730;&amp;#x5229;&amp;#x7528;systemtap&amp;#x7684;kernel.statement&amp;#x8FDB;&amp;#x884C;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&amp;#x6211;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;3.2.54&amp;#x7248;&amp;#x672C;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x5C31;&amp;#x662F;&amp;#x4EE5;3.2.54&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x4E3A;&amp;#x51C6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x662F;&amp;#x5BF9;&amp;#x8F6F;raid&amp;#x5199;io&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x53D1;&amp;#x73B0;io&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x5C31;&amp;#x4ECE;md raid&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x5165;&amp;#x624B;&amp;#xFF0C;io&amp;#x8FDB;&amp;#x5165;&amp;#x8F6F;raid&amp;#x4F1A;&amp;#x7ECF;&amp;#x8FC7;md_make_request&amp;#xFF08;md.c&amp;#x4E2D;&amp;#xFF09;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5728;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x91CC;&amp;#x4F1A;&amp;#x6839;&amp;#x636E;raid&amp;#x7684;&amp;#x4E0D;&amp;#x540C;&amp;#x7EA7;&amp;#x522B;&amp;#x8C03;&amp;#x7528;&amp;#x4E0D;&amp;#x540C;make_request&amp;#xFF08;&amp;#x5982;raid1.c&amp;#x4E2D;&amp;#x7684;make_request&amp;#xFF09;&amp;#x3002;&amp;#x56E0;&amp;#x6B64;&amp;#xFF0C;&amp;#x5148;&amp;#x67E5;&amp;#x770B;md_make_request&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#x6808;&amp;#xFF0C;md_make_request&amp;#x662F;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x6A21;&amp;#x5757;md_mod&amp;#x4E2D;&amp;#x7684;&amp;#x3002;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8F6F;raid&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&amp;#x6CE8;&amp;#x610F;&amp;#xFF1A;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x8981;&amp;#x52A0;&amp;#x4E0A;&amp;#x2013;all-modules&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x52A0;&amp;#x4E0A;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x6253;&amp;#x5370;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x6808;&amp;#x4E0D;&amp;#x5168;&lt;/em&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#stap --all-modules -e &amp;apos;probe module(&amp;quot;md_mod&amp;quot;).function(&amp;quot;md_make_request&amp;quot;){printf(&amp;quot;======================\n&amp;quot;);print_backtrace()}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;======================&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffffa0102c59 : md_make_request+0x0/0x1db [md_mod]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811993d2 : generic_make_request+0x90/0xcf [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811994e4 : submit_bio+0xd3/0xf1 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811236a4 : dio_bio_submit+0x6e/0x8d [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff8112399d : dio_send_cur_page+0x79/0xa4 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81123a6b : submit_page_section+0xa3/0xf8 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff8112435f : __blockdev_direct_IO+0x751/0xa67 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81122312 : blkdev_direct_IO+0x4e/0x53 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810b5e1c : generic_file_direct_write+0xdc/0x14c [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810b6020 : __generic_file_aio_write+0x194/0x278 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81122629 : blkdev_aio_write+0x1f/0x61 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810fa378 : &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;_sync_write+0xb4/0xec [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810faa69 : vfs_write+0xa2/0xe9 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810fac46 : sys_write+0x45/0x6b [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81354d92 : system_call_fastpath+0x16/0x1b [kernel]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&lt;/h1&gt;&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5BF9;&amp;#x6BCF;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x63A2;&amp;#x6D4B;&amp;#xFF0C;&amp;#x67E5;&amp;#x770B;io&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x5BF9;&amp;#x7167;&amp;#x7740;&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x67E5;&amp;#x770B;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4E2D;io&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;generic_file_direct_write&amp;#x4E2D;&amp;#x7684;count&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/generic_file_direct_write.png&quot; alt=&quot;generic_file_direct_write&quot;&gt;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;stap -L &amp;#x2018;kernel.function(&amp;#x201C;function&amp;#x201D;)&amp;#x2019;&amp;#x67E5;&amp;#x770B;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x6709;&amp;#x54EA;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x53EF;&amp;#x4EE5;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -L &amp;apos;kernel.function(&amp;quot;generic_file_direct_write&amp;quot;)&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;generic_file_direct_write@/build/linux-FpPMO6/linux-3.2.54/mm/filemap.c:2266&amp;quot;&lt;/span&gt;) &lt;span class=&quot;variable&quot;&gt;$iocb&lt;/span&gt;:struct kiocb* &lt;span class=&quot;variable&quot;&gt;$iov&lt;/span&gt;:struct iovec const* &lt;span class=&quot;variable&quot;&gt;$nr_segs&lt;/span&gt;:long unsigned int* &lt;span class=&quot;variable&quot;&gt;$pos&lt;/span&gt;:loff_t &lt;span class=&quot;variable&quot;&gt;$ppos&lt;/span&gt;:loff_t* &lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt;:size_t &lt;span class=&quot;variable&quot;&gt;$ocount&lt;/span&gt;:size_t &lt;span class=&quot;variable&quot;&gt;$file&lt;/span&gt;:struct file* &lt;span class=&quot;variable&quot;&gt;$write_len&lt;/span&gt;:size_t&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x53C2;&amp;#x6570;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x7701;&amp;#x53BB;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x6BB5;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x6BB5;&amp;#x53BB;&amp;#x6253;&amp;#x5370;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;$var$$&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x628A;&amp;#x6574;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -e &amp;apos;probe kernel.function(&amp;quot;__blockdev_direct_IO&amp;quot;){printf(&amp;quot;[__blockdev_direct_IO] nr_segs:%d, iov:%s\n&amp;quot;, $nr_segs, $iov$$)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6709;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;&amp;#x53EF;&amp;#x63A2;&amp;#x6D4B;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x65F6;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -L &amp;apos;kernel.function(&amp;quot;dio_send_cur_page&amp;quot;)&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_send_cur_page@/build/linux-FpPMO6/linux-3.2.54/fs/direct-io.c:693&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4ECD;&amp;#x7136;&amp;#x53BB;&amp;#x6253;&amp;#x5370;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x65F6;&amp;#x5C31;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#stap -e &amp;apos;probe kernel.function(&amp;quot;dio_send_cur_page&amp;quot;){printf(&amp;quot;[dio_send_cur_page] sdio:%s\n&amp;quot;, $sdio$$)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;semantic error: unable to find &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;apos;sdio&amp;apos;&lt;/span&gt;, [man error::dwarf] dieoffset 0x13b5772 &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; kernel, near pc 0xffffffff811239c1 &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; dio_send_cur_page /build/linux-FpPMO6/linux-3.2.54/fs/direct-io.c (&amp;lt;no alternatives&amp;gt;): identifier &lt;span class=&quot;string&quot;&gt;&amp;apos;$sdio$$&amp;apos;&lt;/span&gt; at &amp;lt;input&amp;gt;:1:87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt;: probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_send_cur_page&amp;quot;&lt;/span&gt;){&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_send_cur_page] sdio:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;$$)}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                      ^&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x6362;&amp;#x4E00;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;kernel.statement&amp;#x63A2;&amp;#x6D4B;&amp;#x67D0;&amp;#x4E00;&amp;#x884C;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&lt;br&gt;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x5728;fs/direct-io.c&amp;#x4E2D;693&amp;#x884C;&amp;#x5F00;&amp;#x59CB;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x5BF9;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x5185;&amp;#x7684;&amp;#x67D0;&amp;#x4E00;&amp;#x884C;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#x8FDB;&amp;#x884C;&amp;#x6253;&amp;#x5370;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -e &amp;apos;probe kernel.statement(&amp;quot;*@fs/direct-io.c:700&amp;quot;){printf(&amp;quot;[dio_send_cur_page] bio size:%d\n&amp;quot;, $sdio-&amp;gt;bio-&amp;gt;bi_size)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot;&gt;&lt;/a&gt;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&lt;/h1&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;generic_file_direct_write&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[generic_file_direct_write] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;__blockdev_direct_IO&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[__blockdev_direct_IO] nr_segs:%d, iov:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$nr_segs&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$iov&lt;/span&gt;$)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/direct-io.c:774&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[submit_page_section] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/direct-io.c:700&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_send_cur_page] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_bio_submit&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_bio_submit] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;submit_bio&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[submit_bio] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe module(&lt;span class=&quot;string&quot;&gt;&amp;quot;md_mod&amp;quot;&lt;/span&gt;).function(&lt;span class=&quot;string&quot;&gt;&amp;quot;md_make_request&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[md_make_request] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x5206;&amp;#x522B;&amp;#x5BF9;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x8FDB;&amp;#x884C;&amp;#x63A2;&amp;#x6D4B;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;32KB&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&lt;/strong&gt;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xcd0000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xcd0000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7ED3;&amp;#x679C;&amp;#x4E2D;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x51FA;&amp;#x5728;__blockdev_direct_IO&amp;#x91CC;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;io&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x672C;&amp;#x6765;&amp;#x662F;32KB&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF0C;&amp;#x62C6;&amp;#x5206;&amp;#x6210;&amp;#x4E86;4KB&amp;#x7684;io&amp;#xFF08;&amp;#x6B63;&amp;#x597D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;page&amp;#xFF09;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;dio_bio_submit&amp;#xFF0C;submit_bio&amp;#xFF0C;md_make_request&amp;#x90FD;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;8&amp;#x6B21;&amp;#xFF08;32KB/4KB=8)&amp;#xFF0C;&amp;#x800C;dio_send_cur_page&amp;#x53EA;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;7&amp;#x6B21;&amp;#xFF0C;&amp;#x5C11;&amp;#x4E86;&amp;#x4E00;&amp;#x6B21;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x7B2C;&amp;#x516B;&amp;#x6B21;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;dio_bio_submit&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&lt;strong&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&lt;/strong&gt;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x2139000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:12288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:12288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:20480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:20480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:24576&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:24576&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:28672&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x2139000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;dio_send_cur_page&amp;#x6BCF;&amp;#x8C03;&amp;#x7528;&amp;#x4E00;&amp;#x6B21;&amp;#xFF0C;size&amp;#x90FD;&amp;#x53D8;&amp;#x5927;&amp;#x4E86;&amp;#xFF0C;&amp;#x521A;&amp;#x597D;&amp;#x6BCF;&amp;#x6B21;&amp;#x589E;&amp;#x52A0;4KB&amp;#xFF0C;&amp;#x731C;&amp;#x6D4B;&amp;#x662F;&amp;#x5728;__blockdev_direct_IO&amp;#x6309;page&amp;#x5927;&amp;#x5C0F;&amp;#x5C06;io&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5728;dio_send_cur_page&amp;#x8FDB;&amp;#x884C;io&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5408;&amp;#x5E76;&amp;#x540E;&amp;#x4E0B;&amp;#x53D1;&amp;#x5230;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x7684;io&amp;#x7531;&amp;#x53D8;&amp;#x6210;&amp;#x4E86;32KB&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;a href=&quot;#&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;/a&gt;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&lt;/h1&gt;&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x5C31;&amp;#x662F;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#xFF0C;dio_send_cur_page&amp;#x4E2D;&amp;#x5408;&amp;#x5E76;&amp;#x9875;&amp;#x4F1A;&amp;#x5931;&amp;#x8D25;&amp;#x3002;&lt;br&gt;&amp;#x5728;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x524D;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E0E;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x662F;&amp;#x5426;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x5C31;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;dio_bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x662F;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;dio_bio_submit&amp;#x4E0B;&amp;#x53D1;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#x6BCF;&amp;#x6B21;&amp;#x7528;fio&amp;#x53D1;32KB&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x5230;dio_send_cur_page&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x53D8;&amp;#x6210;4KB&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x6BCF;8&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF08;&amp;#x4ECE;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x7ED3;&amp;#x679C;&amp;#x4E2D;&amp;#x4E5F;&amp;#x80FD;&amp;#x770B;&amp;#x51FA;&amp;#x6765;&amp;#xFF09;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x624D;&amp;#x5BF9;&amp;#xFF0C;&amp;#x53EF;&amp;#x662F;&amp;#x7ED3;&amp;#x679C;&amp;#x5374;&amp;#x662F;dio_send_cur_page&amp;#x8FD9;&amp;#x91CC;&amp;#x6CA1;&amp;#x6709;&amp;#x5408;&amp;#x5E76;&amp;#x5176;&amp;#x4ED6;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;io&amp;#x6216;&amp;#x8005;&amp;#x662F;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#xFF0C;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x6709;&amp;#x8FD9;&amp;#x4E48;&amp;#x4E00;&amp;#x5904;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/dio_bio_add_page.png&quot; alt=&quot;dio_bio_add_page&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8C03;&amp;#x7528;dio_bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;dio_bio_submit&amp;#x628A;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x63D0;&amp;#x4EA4;&amp;#x3002;&lt;br&gt;&amp;#x6000;&amp;#x7591;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#x3002;&lt;br&gt;dio_bio_add_page&amp;#x4E2D;&amp;#x53C8;&amp;#x662F;&amp;#x8C03;&amp;#x7528;bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;bio_add_page&amp;#x8C03;&amp;#x7528;&lt;strong&gt;bio_add_page&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;&amp;#x6CE8;&amp;#x610F;&amp;#x5173;&amp;#x6CE8;&lt;/strong&gt;bio_add_page&amp;#x8FD4;&amp;#x56DE;&amp;#x5931;&amp;#x8D25;&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x3002;&amp;#x6709;&amp;#x51E0;&amp;#x5904;return 0&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x5FEB;&amp;#x901F;&amp;#x627E;&amp;#x51FA;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x662F;&amp;#x5728;&amp;#x54EA;&amp;#x4E00;&amp;#x5904;return 0&amp;#x7684;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5206;&amp;#x522B;&amp;#x5728;&amp;#x8FD9;&amp;#x51E0;&amp;#x5904;return 0&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x52A0;&amp;#x5230;&amp;#x4E0A;&amp;#x9762;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:530&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;aaaaaaaaaaaaaaaaaaaaaaaaaaa\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:561&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;cccccccccccccccccccccc\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:581&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;ddddddddddddddddddddddd\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:616&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;eeeeeeeeeeeeeeeeeeeeee\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xccd000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8BF4;&amp;#x660E;&amp;#x662F;&amp;#x5728;bio.c&amp;#x4E2D;&amp;#x7684;581&amp;#x884C;&amp;#x5904;return&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E00;&amp;#x5904;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/blk_recount_segments.png&quot; alt=&quot;blk_recount_segments&quot;&gt;&lt;br&gt;&amp;#x5176;&amp;#x4E2D;queue_max_segments(q)&amp;#x5C31;&amp;#x662F;q-&amp;gt;limits.max_segments&lt;br&gt;&amp;#x518D;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x628A;bio-&amp;gt;bi_phys_segments&amp;#x548C;q-&amp;gt;limits.max_segments&amp;#x7684;&amp;#x503C;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x662F;&amp;#x628A;q-&amp;gt;limits&amp;#x6574;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:581&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;ddddddddddddddddddddddd bio-&amp;gt;bi_phys_segments:%d, q-&amp;gt;limits:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_phys_segments, &lt;span class=&quot;variable&quot;&gt;$q&lt;/span&gt;-&amp;gt;limits$$)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd bio-&amp;gt;bi_phys_segments:1, q-&amp;gt;limits:{.bounce_pfn=4503599627370495, .seg_boundary_mask=4095, .max_hw_sectors=255, .max_sectors=255, .max_segment_size=65536, .physical_block_size=512, .alignment_offset=0, .io_min=512, .io_opt=0, .max_discard_sectors=0, .discard_granularity=0, .discard_alignment=0, .logical_block_size=512, .max_segments=1, .max_integrity_segments=0, .misaligned=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;, .discard_misaligned=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;, .cluster=&lt;span class=&quot;string&quot;&gt;&amp;apos;\001&amp;apos;&lt;/span&gt;, .discard_zeroes_data=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;bio-&amp;gt;bi_phys_segments=1&amp;#xFF0C;q-&amp;gt;limits.max_segments=1&amp;#xFF0C;&lt;br&gt;&amp;#x5206;&amp;#x6790;&amp;#x4EE3;&amp;#x7801;&amp;#x5728;578&amp;#x884C;&amp;#x6EE1;&amp;#x8DB3;while&amp;#x6761;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8FDB;&amp;#x5165;&amp;#x5FAA;&amp;#x73AF;&amp;#x540E;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;retried_segments&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E3A;0&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8DF3;&amp;#x8FC7;if&amp;#x5224;&amp;#x65AD;&amp;#xFF0C;&amp;#x5C06;retried_segments&amp;#x8D4B;&amp;#x503C;&amp;#x4E3A;1&amp;#xFF0C;&amp;#x4E0B;&amp;#x6B21;&amp;#x518D;&amp;#x5FAA;&amp;#x73AF;&amp;#x65F6;&amp;#x5C31;&amp;#x6EE1;&amp;#x8DB3;if&amp;#x5224;&amp;#x65AD;&amp;#x6761;&amp;#x4EF6;&amp;#xFF0C;return&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;q-&amp;gt;limits&amp;#x53CD;&amp;#x6620;&amp;#x5230;sysfs&amp;#x4E2D;&amp;#x5C31;&amp;#x662F;/sys/block/xxx/queue/&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x4E00;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;br&gt;&amp;#x67E5;&amp;#x770B;md127&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/md127/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5176;&amp;#x4ED6;&amp;#x8BBE;&amp;#x5907;&amp;#x5982;vdc&amp;#xFF0C;vdd&amp;#x8FD9;&amp;#x4E2A;&amp;#x503C;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/vdc/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E3A;1&amp;#x5462;&amp;#xFF1F;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7684;md&amp;#x8BBE;&amp;#x5907;&amp;#x90FD;&amp;#x4F1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;1&amp;#x5417;&amp;#xFF1F;&lt;br&gt;&amp;#x5207;&amp;#x6362;&amp;#x5230;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF08;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;raid1&amp;#xFF09;&amp;#xFF0C;&amp;#x67E5;&amp;#x770B;&amp;#x6B64;&amp;#x65F6;&amp;#x7684;md127&amp;#x7684;max_segments.&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/md127/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5C45;&amp;#x7136;&amp;#x662F;126&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x662F;1&amp;#xFF01;&amp;#xFF01;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x77E5;&amp;#x9053;&amp;#x5728;&amp;#x54EA;&amp;#x91CC;&amp;#x628A;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1&amp;#x4E86;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;linux&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#x641C;&amp;#x201D;max_segments&amp;#x201D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x627E;&amp;#x5230;&amp;#x5728;raid1.c&amp;#x4E2D;run&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x7EC4;&amp;#x6210;raid&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x662F;&amp;#x5426;&amp;#x6709;merge_bvec_fn&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5C06;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1&amp;#x3002;&amp;#x800C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x8F6F;raid1&amp;#xFF0C;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x6709;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;merge_bvec_fn&amp;#x51FD;&amp;#x6570;&amp;#xFF1B;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;merge_bvec_fn&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5C31;&amp;#x4E0D;&amp;#x4FEE;&amp;#x6539;max_segments&amp;#x7684;&amp;#x503C;&amp;#x3002;&amp;#x4E4B;&amp;#x6240;&amp;#x4EE5;&amp;#x4F1A;&amp;#x8FD9;&amp;#x6837;&amp;#x505A;&amp;#xFF0C;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8BA4;&amp;#x4E3A;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;io&amp;#x5408;&amp;#x5E76;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5728;&amp;#x4E0A;&amp;#x5C42;&amp;#x5C31;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x4EA4;&amp;#x7ED9;&amp;#x8BE5;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x81EA;&amp;#x5DF1;&amp;#x5408;&amp;#x5E76;io&amp;#x3002;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/raid1_run.png&quot; alt=&quot;raid1_run&quot;&gt;&lt;br&gt;&amp;#x53E6;&amp;#x5916;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x4E00;&amp;#x70B9;&amp;#xFF1A;/sys/block/xxx/queue/max_segments &amp;#x8FD9;&amp;#x662F;&amp;#x4E2A;&amp;#x53EA;&amp;#x8BFB;&amp;#x7684;&amp;#xFF0C;&amp;#x5C1D;&amp;#x8BD5;&amp;#x53BB;&amp;#x4FEE;&amp;#x6539;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x81F3;&amp;#x6B64;&amp;#xFF0C;&amp;#x7EC8;&amp;#x4E8E;&amp;#x627E;&amp;#x5230;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;io&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x7684;&amp;#x539F;&amp;#x56E0;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max-segments&quot;&gt;&lt;a href=&quot;#device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max-segments&quot; class=&quot;headerlink&quot; title=&quot;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&quot;&gt;&lt;/a&gt;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&lt;/h1&gt;&lt;p&gt;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF1A;&amp;#x4EE5;md&amp;#x8BBE;&amp;#x5907;&amp;#x5EFA;&amp;#x6210;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E3A;1&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E5F;&amp;#x662F;1&amp;#xFF1B;&amp;#x5982;&amp;#x679C;md&amp;#x8BBE;&amp;#x5907;max_segments&amp;#x4E3A;126&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E5F;&amp;#x4E3A;126&amp;#xFF0C;&lt;br&gt;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;&amp;#x628A;queue limits&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;max_segments&amp;#x7684;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;128&amp;#xFF0C;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;bdev_stack_limits&amp;#x4E2D;&amp;#x4F1A;&amp;#x6BD4;&amp;#x8F83;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;queue limits&amp;#x548C;device mapper&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;queue limits&amp;#xFF0C;&amp;#x4E24;&amp;#x8005;&amp;#x53D6;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x73B0;&amp;#x5728;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x73B0;&amp;#x5728;&amp;#x7684;max_segments&amp;#x662F;1&amp;#xFF09;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;device mapper&amp;#x7684;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;1&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65B0;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;device mapper&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x6B65;&amp;#x662F;&amp;#x8C03;&amp;#x7528;do_resume&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;device mapper&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x903B;&amp;#x8F91;&amp;#x53C2;&amp;#x8003;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/linux/l-devmapper/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&amp;#x521B;&amp;#x5EFA;device mapper&lt;/a&gt;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;do_resume(drivers/md/dm-ioctl.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    |--dm_swap_table(drivers/md/dm.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            |--dm_calculate_queue_limits(drivers/md/dm-table.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   |--ti-&amp;gt;type-&amp;gt;iterate_devices(ti, dm_set_device_limits,&amp;amp;ti_limits)  &amp;#x5BF9;&amp;#x5E94;linear&amp;#x4E2D;&amp;#x7684;linear_iterate_devices&amp;#xFF08;drivers/md/dm-linear.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            |--dm_set_device_limits(drivers/md/dm-table.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    |--bdev_stack_limits(block/blk-setting.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                           |--blk_stack_limits(block/blk-setting.c)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x603B;&amp;#x7ED3;&quot;&gt;&lt;a href=&quot;#&amp;#x603B;&amp;#x7ED3;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x603B;&amp;#x7ED3;&quot;&gt;&lt;/a&gt;&amp;#x603B;&amp;#x7ED3;&lt;/h1&gt;&lt;p&gt;&amp;#x4ECE;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x770B;&amp;#x51FA;&amp;#xFF0C;max_segments&amp;#x8FD9;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x5F71;&amp;#x54CD;&amp;#x4E86;io&amp;#x7684;&amp;#x5408;&amp;#x5E76;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4F7F;&amp;#x7528;linux &amp;#x8F6F;raid1&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x9047;&amp;#x5230;&amp;#x4E2A;&amp;#x5947;&amp;#x602A;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5F53;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x6BD4;&amp;#x5982;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x4E3A;4k&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF1B;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x5982;sdb&amp;#xFF0C;sdc&amp;#xFF0C;vdb&amp;#xFF0C;vdc&amp;#x8FD9;&amp;#x79CD;&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6709;io&amp;#x62C6;&amp;#x5206;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#x4EE5;&amp;#x4F8B;&amp;#x5B50;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD9;&amp;#x4E2A;&amp;#x73B0;&amp;#x8C61;&amp;#xFF08;&amp;#x4EE5;raid1&amp;#xFF0C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF09;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mdadm &amp;#x2013;create /dev/md/md_test1 &amp;#x2013;run &amp;#x2013;force &amp;#x2013;metadata=0.9 &amp;#x2013;assume-clean &amp;#x2013;level=1 &amp;#x2013;raid-devices=2 /dev/vdb /dev/vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 vdc[1] vdb[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8BE5;raid1&amp;#x8FDB;&amp;#x884C;&amp;#x968F;&amp;#x673A;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF08;&amp;#x987A;&amp;#x5E8F;&amp;#x5199;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF09;&amp;#xFF0C;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;64KB&amp;#xFF0C;fio&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x5982;&amp;#x4E0B;:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[global]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rw=randwrite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;direct=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;numjobs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioengine=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bsrange=64k-64k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rate_iops=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;time_based&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime=120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_reporting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[disk00]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename=/dev/md127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x5199;io&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con1-iostat.png&quot; alt=&quot;con1-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;avgrq-sz&amp;#x4E3A;128&amp;#xFF0C;&amp;#x5355;&amp;#x4F4D;&amp;#x662F;&amp;#x6247;&amp;#x533A;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;64KB&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="storage" scheme="http://yoursite.com/tags/storage/"/>
    
      <category term="mdraid" scheme="http://yoursite.com/tags/mdraid/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2016/04/28/hello-world/"/>
    <id>http://yoursite.com/2016/04/28/hello-world/</id>
    <published>2016-04-28T07:38:27.310Z</published>
    <updated>2016-04-28T07:42:28.455Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
